<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="../photon/css/photon.css"/>
  <style>
    * {
      margin: 0;
      padding: 0;
    }

    body {
      padding: 10px;
      text-align: center;
      background: #E7E7E7;
    }

    img {
      width: 80px;
    }

    h1 {
      font-size: 18px;
      margin: 0;
    }

    footer {
      font-size: 0.8em;
      margin-top: 10px;
    }
  </style>
</head>

<body>
<img id="icon" src="../image/icon.png">
<h1>Jasper</h1>
<div><span>Version</span> <span id="version">0.0.1</span></div>
<div>Created by <a href="https://twitter.com/h13i32maru">Ryo Maruyama</a></div>
<div>Icon design <a href="http://transitkix.com">Miwa Kuramitsu</a></div>
<footer>Copyright Â© 2016 Ryo Maruyama.<br/>All rights reserved.</footer>

<script>
  // link
  const shell = require('electron').shell;
  const els = document.querySelectorAll('a');
  for (const el of Array.from(els)) {
    el.addEventListener('click', function(ev){
      ev.preventDefault();
      shell.openExternal(ev.target.href);
      window.close(); // avoid `always top` on other app
    });
  }

  // version
  const version = location.hash.replace('#', '');
  document.querySelector('#version').textContent = version;

  document.addEventListener('keydown', function(ev){
    if (ev.keyCode === 27) { // esc
      window.close();
    }
  });

  // show devtool
  let clickCount = 0;
  document.querySelector('#icon').addEventListener('click', ()=>{
    clickCount++;
    if (clickCount === 5) {
      const fs = require('fs');
      const path = require('path');
      const app = require('electron').remote.app;
      const remote = require('electron').remote;
      const AppPath = remote.require('./AppPath').AppPath;
      const dataPath = AppPath.getUserData();
      fs.writeFileSync(path.resolve(dataPath, '.debug'), '');
      alert('Welcome to Developer Mode. Please Relaunch Now.');
    }
  });
</script>
</body>

</html>
